Axon BBS - Tor-Only Raspberry Pi Installation Guide
===================================================

This guide covers the setup of an Axon BBS instance on a Debian-based system (like Raspberry Pi OS) that can only access the internet through Tor.

--- Phase 1: System Prerequisites ---

1. Update your system's package list.
   # sudo apt-get update

2. Install all required software: Python, Git, Torsocks, and Node.js/NPM.
   # sudo apt-get install python3 python3-pip python3-venv torsocks git nodejs npm -y

--- Phase 2: Download Source Code ---

1. Create a project directory.
   # mkdir ~/pibbs_project && cd ~/pibbs_project

2. Clone the repository using torsocks to route the connection through Tor.
   # torsocks git clone https://github.com/achgulp/axon_bbs

3. Enter the project directory.
   # cd axon_bbs

--- Phase 3: Backend Setup ---

1. Create and activate a Python virtual environment.
   # python3 -m venv venv
   # source venv/bin/activate

2. Install the required Python packages using torsocks.
   # torsocks pip install -r requirements.txt

3. Generate the secret key and .env file.
   # python generate_secret_key.py

4. Run the database migrations. The necessary directories will be created automatically.
   # python manage.py migrate

5. Create your administrator account.
   # python manage.py createsuperuser

--- Phase 4: Frontend Setup ---

1. Navigate to the frontend directory.
   # cd frontend

2. Install the required Node.js packages using torsocks.
   # torsocks npm install

3. Build the static web interface files.
   # npm run build

4. Return to the project root directory.
   # cd ..

--- Phase 5: Tor Hidden Service Configuration ---

1. Edit the main Tor configuration file.
   # sudo nano /etc/tor/torrc

2. Add these lines to the bottom of the file to create the hidden service.
   HiddenServiceDir /var/lib/tor/bbs_hidden_service/
   HiddenServicePort 80 127.0.0.1:8000

3. Save the file (Ctrl+X, Y, Enter) and restart the Tor service.
   # sudo systemctl restart tor@default.service

4. View your new .onion address. Save this address.
   # sudo cat /var/lib/tor/bbs_hidden_service/hostname

--- Phase 6: Axon BBS Configuration ---

1. Start the Django server.
   # python manage.py runserver 0.0.0.0:8000

2. From a computer on the same network, access the admin panel at http://<YOUR_PI_IP_ADDRESS>:8000/admin/ and log in.

3. Go to "Core" -> "Trusted instances" and add a new instance.
   - Web ui onion url: your-new-onion-address.onion (WITHOUT http://)
   - Is trusted peer: Leave this UNCHECKED.
   - Save the instance.

4. On the "Trusted instances" list, check the box next to your new instance, select the "Generate and encrypt keys for LOCAL instance" action from the dropdown, and click "Go".

5. Stop the server (Ctrl+C) and update your .env file with your onion address.
   # nano .env
   # Add this line:
   ONION_ADDRESS=your-new-onion-address.onion

--- Phase 7: Running the BBS ---

1. Start the server again. It is now fully configured.
   # python manage.py runserver 0.0.0.0:8000

2. Access your BBS via the Tor Browser at your .onion address.
